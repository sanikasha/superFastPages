---
keywords: fastai
title: 2.2, 2.3 Coding Hacks
toc: true
categories: []
type: ap
week: 25
nb_path: _notebooks/2023-03-12-DrawImagePIL.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-03-12-DrawImagePIL.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageFont</span><span class="p">,</span> <span class="n">ImageDraw</span> 

<span class="c1"># Allows image to be displayed in Jupyter notebook, only run in local</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">display</span>

<span class="c1"># Open an Image from images directory</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;images/skin1.png&#39;</span><span class="p">)</span>
 
<span class="c1"># Call draw Method to add 2D graphics in an image</span>
<span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="c1"># Downloaded font, opened zip, dragged to fonts directory</span>
<span class="n">myfont</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s1">&#39;fonts/Aloevera.ttf&#39;</span><span class="p">,</span> <span class="mi">68</span><span class="p">)</span>
 
<span class="c1"># Add Text to an image, adjust coordinates/text/font/color</span>
<span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">120</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span> <span class="s2">&quot;We recommend...&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">myfont</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
 
<span class="c1"># Display edited image</span>
<span class="n">img</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Save image in images directory</span>
<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;images/skin2.png&#39;</span><span class="p">)</span>

<span class="c1"># Displays image in notebook</span>
<span class="n">display</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;images/skin2.png&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
 
<span class="c1"># numpy for performing batch processing and elementwise</span>
<span class="c1"># matrix operations efficiently</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Allows image to be displayed in Jupyter notebook, only run in local</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">display</span>

<span class="n">display</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;images/negatives.jpg&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
 
<span class="c1"># numpy for performing batch processing and elementwise</span>
<span class="c1"># matrix operations efficiently</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Allows image to be displayed in Jupyter notebook, only run in local</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">display</span>
 
 
<span class="c1"># Opening an image, and saving open image object</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;images/negatives.jpg&quot;</span><span class="p">)</span>
 
<span class="c1"># Creating an numpy array out of the image object</span>
<span class="n">img_arry</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
 
<span class="c1"># Maximum intensity value of the color mode</span>
<span class="n">I_max</span> <span class="o">=</span> <span class="mi">255</span>
 
<span class="c1"># Subtracting 255 (max value possible in a given image</span>
<span class="c1"># channel) from each pixel values and storing the result</span>
<span class="n">img_arry</span> <span class="o">=</span> <span class="n">I_max</span> <span class="o">-</span> <span class="n">img_arry</span>
 
<span class="c1"># Creating an image object from the resultant numpy array</span>
<span class="n">inverted_img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">img_arry</span><span class="p">)</span>
 
<span class="c1"># Saving the image under the name Image_negative.jpg</span>
<span class="n">inverted_img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;images/negatives1.jpg&quot;</span><span class="p">)</span>


<span class="c1"># Displays image in notebook</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;after image:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;images/negatives1.jpg&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># reads the JSON file and converts it to a Pandas DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;files/transport.json&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="c1"># What part of the data set needs to be cleaned?</span>
<span class="c1"># From PBL learning, what is a good time to clean data?  Hint, remember Garbage in, Garbage out?</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>    Student Grade  Student Age Transport
0              12           17       Car
1              12           17      Walk
2              12           19       Bus
3              12           17       Bus
4              12           16       Car
5              12           16       Car
6              12           17       Car
7              12           17       Bus
8              11           17       Car
9              12           17       Car
10             12           16       Car
11             11           16       Car
12             12           16     Skate
13             11           32       Car
14             12           18       Car
15             12           15       Car
16             12           17      Walk
17             11           16       Car
18             12           18       Car
19             12           16      Walk
20             12           18      Walk
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Student Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;mean:&quot;</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>

<span class="n">df3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Student Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;min:&quot;</span><span class="p">,</span> <span class="n">df3</span><span class="p">)</span>

<span class="n">df4</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Student Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;max:&quot;</span><span class="p">,</span> <span class="n">df4</span><span class="p">)</span>

<span class="n">df5</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Student Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;median:&quot;</span><span class="p">,</span> <span class="n">df5</span><span class="p">)</span>

<span class="n">df6</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Student Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;mode:&quot;</span><span class="p">,</span> <span class="n">df6</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>mean: 17.523809523809526
min: 15
max: 32
median: 17.0
mode: 0    17
Name: Student Age, dtype: int64
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

