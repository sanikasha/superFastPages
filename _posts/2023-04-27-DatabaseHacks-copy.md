---
keywords: fastai
description: Big Idea 3 with Databases and Data Operations
title: P3 4/27 Big Idea 3 Data Structures
toc: true
badges: false
comments: true
author: Alex, David, Kaiden, Ethan T.,Ethan Z., Navan, Nikhil 
categories: [student]
type: ap
week: 31
nb_path: _notebooks/2023-04-27-DatabaseHacks copy.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-04-27-DatabaseHacks copy.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Leaderboard-Database">Leaderboard Database<a class="anchor-link" href="#Leaderboard-Database"> </a></h3><blockquote><p>How do you set up a database model?</p>
<h4 id="What-is-a-database-model">What is a database model<a class="anchor-link" href="#What-is-a-database-model"> </a></h4><ul>
<li>A database model shows the logical structure of a database</li>
<li>It fundamentally determines in which manner data can be stored, manipulated, and organized.</li>
<li>Some popular database models are relational models, object oriented models, hierarchial models, flat file models, and network models</li>
<li>The one below is an Object-Relational Model which is a combination of a relational model and an object oriented model</li>
</ul>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Creating-SQLAlchemy-App">Creating SQLAlchemy App<a class="anchor-link" href="#Creating-SQLAlchemy-App"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///sqlite.db&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;SQLALCHEMY_TRACK_MODIFICATIONS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;SECRET_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SECRET_KEY&quot;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="c1"># Images storage</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;MAX_CONTENT_LENGTH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>  <span class="c1"># maximum size of uploaded content</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;UPLOAD_EXTENSIONS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span> <span class="s2">&quot;.gif&quot;</span><span class="p">]</span>  <span class="c1"># supported file types</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;UPLOAD_FOLDER&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;volumes/uploads/&quot;</span>  <span class="c1"># location of user uploaded content</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Creating-Database-Template">Creating Database Template<a class="anchor-link" href="#Creating-Database-Template"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>


<span class="c1"># </span>
<span class="c1"># Leaderboard DB class that maps leaderboard SQL table </span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">Leaderboard</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;leaderboard&quot;</span>

    <span class="c1"># </span>
    <span class="c1"># Leaderboard DB columns for easy, medium and hard points with user info</span>
    <span class="c1">#    </span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_username</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_grade</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_pointsEasy</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_pointsMedium</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_pointsHard</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># </span>
    <span class="c1"># Leaderboard DB class constructor </span>
    <span class="c1">#</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grade</span> <span class="o">=</span> <span class="n">grade</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsEasy</span> <span class="o">=</span> <span class="n">pointsEasy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsMedium</span> <span class="o">=</span> <span class="n">pointsMedium</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsHard</span> <span class="o">=</span> <span class="n">pointsHard</span>

    <span class="c1"># </span>
    <span class="c1"># Leaderboard DB class string representation of an object</span>
    <span class="c1">#</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;Leaderboard(id=&#39;</span><span class="si">%s</span><span class="s2">&#39;, username=&#39;</span><span class="si">%s</span><span class="s2">&#39;, grade=&#39;</span><span class="si">%s</span><span class="s2">&#39;, pointsEasy=&#39;</span><span class="si">%s</span><span class="s2">&#39;, pointsMedium=&#39;</span><span class="si">%s</span><span class="s2">&#39;, pointsHard=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsEasy</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsMedium</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsHard</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard username</span>
    <span class="c1">#    </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard username</span>
    <span class="c1">#        </span>
    <span class="nd">@username</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># </span>
    <span class="c1"># checks Leaderboard username valid</span>
    <span class="c1">#            </span>
    <span class="k">def</span> <span class="nf">is_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">==</span> <span class="n">username</span>
    
        <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard easy points</span>
    <span class="c1">#        </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grade</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grade</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard easy points</span>
    <span class="c1">#        </span>
    <span class="nd">@grade</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">grade</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grade</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard easy points</span>
    <span class="c1">#        </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pointsEasy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsEasy</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard easy points</span>
    <span class="c1">#        </span>
    <span class="nd">@pointsEasy</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pointsEasy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsEasy</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard medium points</span>
    <span class="c1">#            </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pointsMedium</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsMedium</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard medium points</span>
    <span class="c1">#        </span>
    <span class="nd">@pointsMedium</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pointsMedium</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsMedium</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard hard points</span>
    <span class="c1">#            </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pointsHard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsHard</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard hard points</span>
    <span class="c1">#        </span>
    <span class="nd">@pointsHard</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pointsHard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointsHard</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard password</span>
    <span class="c1">#            </span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>

    <span class="c1"># </span>
    <span class="c1"># Sets Leaderboard password</span>
    <span class="c1">#        </span>
    <span class="k">def</span> <span class="nf">set_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;sha512&#39;</span><span class="p">)</span>

    <span class="c1"># </span>
    <span class="c1"># Checks Leaderboard password validity</span>
    <span class="c1">#            </span>
    <span class="k">def</span> <span class="nf">is_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">check_password_hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># </span>
    <span class="c1"># Converts Leaderboard to dictionary</span>
    <span class="c1">#            </span>
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="s2">&quot;grade&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="s2">&quot;pointsEasy&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsEasy</span><span class="p">,</span> <span class="s2">&quot;pointsMedium&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsMedium</span><span class="p">,</span> <span class="s2">&quot;pointsHard&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointsHard</span><span class="p">}</span>

    <span class="c1"># </span>
    <span class="c1"># Converts Leaderboard to string values</span>
    <span class="c1">#                </span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># </span>
    <span class="c1"># Creates Leaderboard database</span>
    <span class="c1">#                </span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="c1"># </span>
    <span class="c1"># Returns Leaderboard name value pairs</span>
    <span class="c1">#            </span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;grade&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span>
            <span class="s2">&quot;pointsEasy&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointsEasy</span><span class="p">,</span>
            <span class="s2">&quot;pointsMedium&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointsMedium</span><span class="p">,</span>
            <span class="s2">&quot;pointsHard&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointsHard</span>
        <span class="p">}</span>

    <span class="c1"># </span>
    <span class="c1"># Updates Leaderboard DB rows for points and user data</span>
    <span class="c1">#                </span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;only updates values with length&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">grade</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grade</span> <span class="o">=</span> <span class="n">grade</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pointsEasy</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsEasy</span> <span class="o">=</span> <span class="n">pointsEasy</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pointsMedium</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsMedium</span> <span class="o">=</span> <span class="n">pointsMedium</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pointsHard</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointsHard</span> <span class="o">=</span> <span class="n">pointsHard</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># </span>
    <span class="c1"># Delets Leaderboard row from teh DB</span>
    <span class="c1">#                </span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Initialization-of-Data">Initialization of Data<a class="anchor-link" href="#Initialization-of-Data"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Initializes Leaderboard DB with test data</span>
<span class="c1">#   </span>
<span class="k">def</span> <span class="nf">init_leaderboards</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Create database and tables&quot;&quot;&quot;</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="sd">&quot;&quot;&quot;Tester data for table&quot;&quot;&quot;</span>
        <span class="n">l1</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;bob&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">l2</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;bobby&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;11&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;appley&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">l3</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;bobbert&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;11&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;appled&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
        <span class="n">l4</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;bobruth&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;appler&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
        <span class="n">l5</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;sanikas&quot;</span><span class="p">,</span> <span class="n">grade</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;sanisha&quot;</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">pointsHard</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
        <span class="n">leaderboards</span> <span class="o">=</span> <span class="p">[</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">l4</span><span class="p">,</span> <span class="n">l5</span><span class="p">]</span>

        <span class="sd">&quot;&quot;&quot;Builds sample user/note(s) data&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">leaderboards</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="sd">&#39;&#39;&#39;add user to table&#39;&#39;&#39;</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new uid </span><span class="si">{</span><span class="nb">object</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="sd">&#39;&#39;&#39;fails with bad or duplicate data&#39;&#39;&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records exist uid </span><span class="si">{</span><span class="n">l</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">, or error.&quot;</span><span class="p">)</span>

<span class="n">init_leaderboards</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Created new uid bob
Created new uid bobby
Created new uid bobbert
Created new uid bobruth
Created new uid sanikas
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="DO-THESE-FOR-THIS-SECTION">DO THESE FOR THIS SECTION<a class="anchor-link" href="#DO-THESE-FOR-THIS-SECTION"> </a></h3><ul>
<li>fill in the blanks</li>
<li>add a new leaderboard, and edit the bobbert leaderboard; add proof with a screenshot of the sqlite.db</li>
</ul>
<p><img src="/superFastPages/images/copied_from_nb/images/leader1.png" alt="alternative text"></p>
<ul>
<li>add a new set of keys and values to the leaderboard; add proof with a screenshot of the sqlite.db</li>
</ul>
<p><img src="/superFastPages/images/copied_from_nb/images/leader2.png" alt="alternative text"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Picture-Database">Picture Database<a class="anchor-link" href="#Picture-Database"> </a></h2><ul>
<li><img src="https://user-images.githubusercontent.com/111910633/233181629-36a561c0-8ba5-4644-ac43-274c74a55dff.png" alt="image"></li>
<li>Used CRUD methods which have create, read, update, and delete rows in the table.  There is a function called initEasyImages which populates the 'Images' table with data.</li>
<li>The <strong>init</strong> method is used to create a new row in the table with a given imagePath, xCoord, yCoord, and difficulty. The <strong>repr</strong> method returns a string representation of the object when it is printed.</li>
<li>The table has five columns: id, _imagePath, _xCoord, _yCoord, and _difficulty.
<img src="https://user-images.githubusercontent.com/111910633/233180602-c81c1931-85a4-4d8e-b738-a091eb803d60.png" alt="image"></li>
<li><img src="https://user-images.githubusercontent.com/111910633/233181071-4442d4c3-8c54-497f-b3bf-d625e6742c05.png" alt="image"></li>
<li>This part of the code defines getter and setter methods for the columns in the Images model.  It sets and retrieves the metadata of the image.</li>
<li><img src="https://user-images.githubusercontent.com/111910633/233181852-9daeed5a-6ab7-4d46-8069-8bcf390ea07a.png" alt="image"></li>
<li>The initEasyImages function initializes the database with image metadata for easy difficulty images.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">LargeBinary</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">class</span> <span class="nc">Images</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;images&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_imagePath</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_xCoord</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_yCoord</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_difficulty</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imagePath</span><span class="p">,</span> <span class="n">xCoord</span><span class="p">,</span> <span class="n">yCoord</span><span class="p">,</span> <span class="n">difficulty</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_imagePath</span> <span class="o">=</span> <span class="n">imagePath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xCoord</span> <span class="o">=</span> <span class="n">xCoord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yCoord</span> <span class="o">=</span> <span class="n">yCoord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">difficulty</span> <span class="o">=</span> <span class="n">difficulty</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;image(id=&#39;</span><span class="si">%s</span><span class="s2">&#39;, imagePath=&#39;</span><span class="si">%s</span><span class="s2">&#39;, xCoord=&#39;</span><span class="si">%s</span><span class="s2">&#39;, yCoord=&#39;</span><span class="si">%s</span><span class="s2">&#39;, difficulty=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">imagePath</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xCoord</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yCoord</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">difficulty</span>
        <span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">imagePath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_imagePath</span>

    <span class="nd">@imagePath</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">imagePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_imagePath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xCoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xCoord</span>

    <span class="nd">@xCoord</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">xCoord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xCoord</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">yCoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yCoord</span>

    <span class="nd">@yCoord</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">yCoord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yCoord</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">difficulty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_difficulty</span>

    <span class="nd">@difficulty</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">difficulty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_difficulty</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;imagePath&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_imagePath</span><span class="p">,</span> <span class="s2">&quot;xCoord&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xCoord</span><span class="p">,</span> <span class="s2">&quot;yCoord&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yCoord</span><span class="p">,</span> <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_difficulty</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy &quot;unit of work pattern&quot; requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">imagePath</span><span class="p">,</span>
            <span class="s2">&quot;xCoord&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">xCoord</span><span class="p">,</span>
            <span class="s2">&quot;yCoord&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">yCoord</span><span class="p">,</span>
            <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">difficulty</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, password, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">xCoord</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">yCoord</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">difficulty</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;only updates values with length&quot;&quot;&quot;</span>
        <span class="n">xCoord</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">xCoord</span><span class="p">)</span>
        <span class="n">yCoord</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">yCoord</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">imagePath</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">if</span> <span class="n">xCoord</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xCoord</span> <span class="o">=</span> <span class="n">xCoord</span>
        <span class="k">if</span> <span class="n">yCoord</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yCoord</span> <span class="o">=</span> <span class="n">yCoord</span>
        <span class="k">if</span> <span class="n">difficulty</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">difficulty</span> <span class="o">=</span> <span class="n">difficulty</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>


    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">initEasyImages</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="n">image_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">/</span><span class="s2">&quot;images/easy&quot;</span>
        <span class="n">images_paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">image_dir</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()]</span>
        <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">Images</span><span class="p">(</span><span class="s2">&quot;images/easy/&quot;</span> <span class="o">+</span> <span class="n">image</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images_paths</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
             <span class="k">try</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully added entry&quot;</span><span class="p">)</span>
             <span class="k">except</span><span class="p">:</span>
                 <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                 <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error adding image: &quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">imagePath</span><span class="p">)</span>

<span class="n">initEasyImages</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Popcorn-Hacks">Popcorn Hacks<a class="anchor-link" href="#Popcorn-Hacks"> </a></h4><ul>
<li>The init method initializes a new Images object with the following parameters: imagePath, xCoord, yCoord, and difficulty.</li>
<li>In the Images class, the tablename attribute specifies the name of the table.</li>
<li>The update method updates the values of the object's attributes imagePath, xCoord, yCoord, and difficulty based on the input parameters, and then uses the db.session.commit method to commit the changes to the database.</li>
<li>The db module used in this code is part of a larger library called SQLAlchemy, which provides a set of tools for working with databases in Python.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Picture-Encoding">Picture Encoding<a class="anchor-link" href="#Picture-Encoding"> </a></h2><p><strong>Essential Question: What are some methods that we could store and access images in the backend, and how can we send them to a frontend application?</strong></p>
<p>The image encoding process for this project is done within the endpoints created on our backend application. The overarching process is split into three seperate sub-processes, each handling a different level of game-difficulty. For this lesson, we will look at the easy images sub-process as our example.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_random_easy_image</span><span class="p">():</span>
    <span class="n">images</span> <span class="o">=</span> <span class="n">Images</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_difficulty</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</pre></div>
<p>This procedure is a void function that takes in no arguments directly, but does access the database via the <code>Images</code> object imported from the models that we created</p>
<p>The first line filters all database entries and searches for all image entries with the difficulty column set to 0, which we established as the identifying factor for easy images. The <code>.all()</code> method attached to the end of the query serves to return all matching image objects in a list called <code>image</code>.</p>
<p>The procedure finally returns a random image using the <code>random.choice</code> method.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ImagesAPI</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">_EasyImages</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">get_random_easy_image</span><span class="p">()</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">image</span><span class="p">:</span>
                <span class="n">image_path</span> <span class="o">=</span> <span class="n">project_path</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">image</span><span class="o">.</span><span class="n">imagePath</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">image_file</span><span class="p">:</span>
                    <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;bytes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">image_file</span><span class="o">.</span><span class="n">read</span><span class="p">()))[</span><span class="mi">2</span><span class="p">:][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;xCoord&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">xCoord</span>
                <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;yCoord&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">yCoord</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</pre></div>
<p>If the first procedure locates and selects the image, the second procedure then encodes, formats, and returns the JSON data containing the image and its metadata.</p>
<p>The procedure first calls the <code>get_random_easy_image()</code> procedure created earlier to store our image object and also initializes an empty dictionary to store our json data.</p>
<p>If a valid image object is found, the procedure will attempt to create an absolute path to the image file on the computer running flask application. This is achieved by concatenating the absolute path of the working project directory to the relative image path stored in the database. The aboslute path of the directory is generated in our <em>namespace package</em> (__init__.py) in our _nighthawkguessr_api_ package. The line calculating the project path is shown below, and uses the <code>Path</code> object from the <code>pathlib</code> library.</p>
<div class="highlight"><pre><span></span><span class="n">project_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
</pre></div>
<p>After creating the image path, the procedure attempts to open the image file, and procedes to use the <code>base64.b64encode</code> method to encode the image file bytes into base64 data. This is convinient for us as HTML on the frontend pages allows us to render images with base64 bytes (Not sure about normal image bytes). The base64 bytes are then encoded into a python literal string in order to be jsonified and displayed on the api endpoint. The <code>[2:][:-1]</code> appended to the end is a type of string slicing which removes the <strong>b'</strong> generated at the start of the data and the <strong>'</strong> generated at the end of the data. These extraneous characters are used to indicate a base64 string, and are not part of the original data.</p>
<p>The procedure finally appends the metadata (position of the right coordinates on the map) to the <code>json_data</code> dictionary, completing the process.</p>
<p>Finally, the procedure returns the JSONified data, which is accessible from our API. As you can see, the images we process are extremely large and possess high resolution (typically a few megabytes!)
<img src="https://user-images.githubusercontent.com/111480448/234923845-98d21dea-ad65-48db-bae5-30819fb1f98b.png" alt="&quot;API endpoint&quot;"></p>
<h3 id="Popcorn-Hack:">Popcorn Hack:<a class="anchor-link" href="#Popcorn-Hack:"> </a></h3><blockquote><p>Please write a few sentences answering the essential question, "What are some methods that we could store and access images in the backend, and how can we send them to a frontend application?"</p>
</blockquote>
<ul>
<li>GET and POST methods can be used to store and access images. GET will retreive an image being stored on backend, and POST can uload images to the server, which can later be accessed. These are both HTTP methods, and the requests can be sent through applications such as postman, as we have done in the past.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Endpoints">Endpoints<a class="anchor-link" href="#Endpoints"> </a></h2><blockquote><p>What are endpoints and how do we use them to transfer data from one part of the internet to another?</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Backend:">Backend:<a class="anchor-link" href="#Backend:"> </a></h3><ul>
<li>The backend creates endpoints that are used to edit the properties of the database constructed by the model.</li>
<li><code>GET</code>, <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> methods are used in order to define HTTP endpoints in the API.<ul>
<li>These endpoints are based on requests that can be made to manipulate the database.</li>
<li>Variables defined in the model file are used to call data from the database in order to be manipulated.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Methods-in-Backend-Example">Methods in Backend Example<a class="anchor-link" href="#Methods-in-Backend-Example"> </a></h3><ul>
<li>Modules are being imported with specified classes which are used later in the program.<ul>
<li><code>Blueprint</code>: used to organize routes and functions</li>
<li><code>request</code>: used to access data sent to the Flask app. through the http request</li>
<li><code>Api</code>: creates a Flask instance that handles requests</li>
<li><code>Resource</code>: this allows for the definition of custom HTTP requests</li>
<li><code>reqparse</code>: used to parse (sort and search) and validate data that is requested</li>
</ul>
</li>
<li>The blueprint and api are then defined as variables and are used to store any future data that is requested.</li>
<li>Some preliminary functions, such as <code>find_by_username</code>, are created to be used later in the API code, allowing for API code.<ul>
<li>In this case, these functions are used to search through the database to find specific usernames.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Blueprint</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">reqparse</span>

<span class="c1"># setting variables used to store future data</span>
<span class="n">leaderboard_bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s2">&quot;leaderboards&quot;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<span class="n">leaderboard_api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">leaderboard_bp</span><span class="p">)</span>

<span class="c1"># pre-made function created to search for usernames, allows for simplified program</span>
<span class="k">def</span> <span class="nf">find_by_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="GET-Method">GET Method<a class="anchor-link" href="#GET-Method"> </a></h4><ul>
<li>This method is used to fetch specific data points from the database by searching through the usernames.</li>
<li>This will be different for each type of database being made, however the general format stays the same.<ul>
<li>Since this is a text database, to pull specific information from the database, the API will query through the data using the username, which is unique.</li>
<li>The function defined previously, <code>find_by_username()</code>, is used to search through the database and pull the specific data point that is being searched.</li>
<li>If the user exists, the data of that user will be returned, being sent to the frontend of the program.</li>
<li>If a user isn't found, an error will be returned that the user does not exist.
<br>
<br></li>
</ul>
</li>
<li>In general, the program will always be searching for a piece of information that is unique and that will be used to pull data to wherever it is being requested.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># requested username turned into variable for later use</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="s2">&quot;uid&quot;</span><span class="p">)</span>
        <span class="c1"># username used to search for data and the found data is made into a variable</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="c1"># data is sent to the frontend</span>
            <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="c1"># error checking</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">user</span><span class="p">},</span> <span class="mi">404</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="POST-Method">POST Method<a class="anchor-link" href="#POST-Method"> </a></h4><ul>
<li>This method is used to add a specific piece of information in the database based on searching by usernames.</li>
<li>This is again different for each database that is made, however the general structure stays the same.<ul>
<li>In this example, a parser is being used to extract data from an incoming request. In this case, the <code>RequestParser</code> class is used from the Flask module.<ul>
<li>All required arguments are added to the parser, specifying what type of data it is.</li>
<li>The <code>__args__</code> variable is added in order to parse and store all incoming data.</li>
</ul>
</li>
<li>The variable <code>leaderboard</code> is created to make a new object that will contain the values from the incoming data.</li>
<li>The function will attempt to add a new entry in the leaderboard database and return a status of a successful addition of the data.</li>
<li>If there is an error in the data being inputted, a status code of 500 will be returned.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># using parsers to gather and data that is to be posted and validate it&#39;s true</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">reqparse</span><span class="o">.</span><span class="n">RequestParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;pointsEasy&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;pointsMedium&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;pointsHard&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="c1"># variable made to store data</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

        <span class="c1"># variable created to format all data into one place and send to database for logging</span>
        <span class="n">leaderboard</span> <span class="o">=</span> <span class="n">Leaderboard</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">],</span>
                                  <span class="n">args</span><span class="p">[</span><span class="s2">&quot;pointsEasy&quot;</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;pointsMedium&quot;</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;pointsHard&quot;</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># data is sent to the database for storage</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">leaderboard</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">leaderboard</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="mi">201</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># error checking</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;server error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="PUT-Method">PUT Method<a class="anchor-link" href="#PUT-Method"> </a></h4><ul>
<li>This method is used to update a specific piece of information in the database based on searching by usernames.</li>
<li>For each data base that is made, there will be different specific but the overall structure stays the same.<ul>
<li>First, the <code>username</code> variable is defined, which retrieves the requested username and sets it as a variable that will be used later to edit a specific dataset.</li>
<li>The function <code>find_by_username()</code> is again used to search through the data to look for the username requested. This is set to a variable to be used later.</li>
<li>If the username is found in the database, the rest of the dataset is updated with the new values requested. This is updated into the database.</li>
<li>If there is an error found with the data requested of it the user isn't found, an error is returned.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># variable created to make requested username into something that can be used to search for data in future</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="s2">&quot;uid&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># attempts to find the data in the database</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
                <span class="c1"># if the data is found, the data points are updates</span>
                <span class="n">user</span><span class="o">.</span><span class="n">pointsEasy</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pointsEasy&quot;</span><span class="p">))</span>
                <span class="n">user</span><span class="o">.</span><span class="n">pointsMedium</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pointsMedium&quot;</span><span class="p">))</span>
                <span class="n">user</span><span class="o">.</span><span class="n">pointsHard</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pointsHard&quot;</span><span class="p">))</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="mi">201</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if user not found, error is returned</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;leaderboard not found&quot;</span><span class="p">},</span> <span class="mi">404</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># checks for errors in request</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;server error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="DELETE-Method">DELETE Method<a class="anchor-link" href="#DELETE-Method"> </a></h4><ul>
<li>This method is used to delete a specific information from the database, again searching by username.</li>
<li>The overall structure stays the same between different databases, but the specific variables will need to be changed to personalize the database.<ul>
<li>A variable for the username is created in order to search for for the user name requested later in the code with the function <code>find_by_username()</code>.</li>
<li>If the user is found, the user is deleted, along with that user's data and the change is saved to the database.</li>
<li>If the user isn't found or if an error is found with the data requested, an error is returned.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># username variable defined to store requested value</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="s2">&quot;uid&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># finds the username and stores data in variable</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
                <span class="c1"># if the user is found, the user and their data is deleted</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if user not found, error is returned</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;leaderboard not found&quot;</span><span class="p">},</span> <span class="mi">404</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># error checking for request error</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;server error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Displaying-the-Full-Database">Displaying the Full Database<a class="anchor-link" href="#Displaying-the-Full-Database"> </a></h4><ul>
<li>Another class is created in order to display the entire database at once and also to delete the entire database if necessary.</li>
<li>This uses the same functions as before to GET and DELETE the data, however it is modified slightly to look through the entire database abd display or delete all data points.</li>
<li>An example of where this would be useful is to create a table of data in the frontend.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">LeaderboardListAPI</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="c1"># GET method</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># attempts to find the entire database requested and is stored in variable</span>
            <span class="n">leaderboards</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Leaderboard</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="c1"># sends back the entire database</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">leaderboard</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">leaderboard</span> <span class="ow">in</span> <span class="n">leaderboards</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># error checking for request errors</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;server error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span>

    <span class="c1"># DELETE method</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># deletes entire database</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Leaderboard</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># checks for errors in request</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;server error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Popcorn-Hacks">Popcorn Hacks<a class="anchor-link" href="#Popcorn-Hacks"> </a></h4><p>Please answer these questions to earn points for the popcorn hacks.</p>
<ol>
<li>What are the four HTTP request methods that are used with Flask?</li>
</ol>
<p>GET, PUT, POST, DELETE</p>
<ol>
<li>What is a parser and how would it be aid with data validation?</li>
</ol>
<p>Parsers read and interpret data. In flask it can make sure data is in the correct format to be interpreted by the program code.</p>
<ol>
<li>What is the role endpoints in Flask?</li>
</ol>
<p>They define the routes that allows the user to acces different parts of the backend, and retrieve the information neccesary to serve the purpose of their program.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Frontend-and-How-it-Communicates-to-Backend">Frontend and How it Communicates to Backend<a class="anchor-link" href="#Frontend-and-How-it-Communicates-to-Backend"> </a></h3><blockquote><p>This first part of the frontend logic simply finds out of the site is running locally or not, off of which is figures out whether or not to pull data from the local backend link or the global backend link. In this example, a global backend link hasn't been sent, however it would go in the second set of quotations after the local address. This isn't something you need to know, but it is nice to use when developing full stack applications.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">checks</span> <span class="k">if</span> <span class="n">site</span> <span class="ow">is</span> <span class="n">run</span> <span class="n">locally</span>
<span class="n">const</span> <span class="n">isLocalhost</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span>
  <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">hostname</span> <span class="o">===</span> <span class="s2">&quot;localhost&quot;</span> <span class="o">||</span>
  <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">hostname</span> <span class="o">===</span> <span class="s2">&quot;[::1]&quot;</span> <span class="o">||</span>
  <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">hostname</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">/^</span><span class="mi">127</span><span class="p">(</span><span class="err">?</span><span class="p">:</span>\<span class="o">.</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="mi">25</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">|</span><span class="mi">2</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">|</span><span class="p">[</span><span class="mi">01</span><span class="p">]</span><span class="err">?</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="err">?</span><span class="p">)){</span><span class="mi">3</span><span class="p">}</span><span class="err">$</span><span class="o">/</span><span class="p">)</span>
<span class="p">)</span>
<span class="o">//</span> <span class="n">defines</span> <span class="n">database</span> <span class="n">url</span>
<span class="n">const</span> <span class="n">api</span> <span class="o">=</span> <span class="n">isLocalhost</span> <span class="err">?</span> <span class="s2">&quot;http://localhost:8200&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="GET-Method">GET Method<a class="anchor-link" href="#GET-Method"> </a></h4><ul>
<li>This method is more complicated in terms of requesting, simply because in order to, for example, print all data points into a table, the function needs to iterate through the entire database.</li>
<li>In this example, the function <code>getList()</code> is used to asynchronously fetch the entire database and set it to a variable called <code>list</code>.</li>
<li>The list is returned for later use outside of this function in order to print the data.</li>
</ul>
<h5 id="Printing-the-Data">Printing the Data<a class="anchor-link" href="#Printing-the-Data"> </a></h5><ul>
<li>In order to print the data, the function <code>getList()</code> is run and once it is run, it iterates through the data to pull out each individual data point and enter it into the function used to make the table.<ul>
<li>For each class in the database, which is each row in the database, the variables corresponding to that specific class are pulled and inserted into the <code>addTask()</code> function as parameters to create the table of users.</li>
</ul>
</li>
<li>The function <code>addTask()</code> is used to create the visual table that the user sees.<ul>
<li>A row is created and for each table cell in that row, the data is added by iterating through the array of variables that are parameters pulled directly from the database.</li>
<li>A new row is added into table for each new class of information pulled from the database.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">fetches</span> <span class="n">entire</span> <span class="n">database</span>
<span class="n">const</span> <span class="n">getList</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">stores</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">variable</span> <span class="nb">list</span>
  <span class="n">const</span> <span class="nb">list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="s2">&quot;/leaderboardList&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">());</span>
  <span class="k">return</span> <span class="nb">list</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">goes</span> <span class="n">through</span> <span class="n">entire</span> <span class="n">database</span> <span class="ow">and</span> <span class="n">pulls</span> <span class="n">each</span> <span class="n">individual</span> <span class="k">class</span>
<span class="nc">getList</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="nb">list</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="o">//</span> <span class="k">for</span> <span class="n">each</span> <span class="k">class</span> <span class="err">(</span><span class="nc">row</span><span class="p">),</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">pulled</span> <span class="ow">and</span> <span class="n">added</span> <span class="n">into</span> <span class="n">addTask</span><span class="p">()</span> <span class="n">function</span> <span class="n">to</span> <span class="n">be</span> <span class="n">put</span> <span class="ow">in</span> <span class="n">visual</span> <span class="n">table</span>
  <span class="nb">list</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="bp">cls</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">addTask</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">pointsEasy</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">pointsMedium</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">pointsHard</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>

<span class="o">//</span> <span class="n">adds</span> <span class="n">visual</span> <span class="n">representation</span> <span class="n">of</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">table</span>
<span class="n">function</span> <span class="n">addTask</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">)</span> <span class="p">{</span>

  <span class="o">//</span> <span class="n">array</span> <span class="n">of</span> <span class="n">variables</span> <span class="n">defining</span> <span class="n">data</span> <span class="n">points</span>
  <span class="n">var</span> <span class="n">tableCells</span> <span class="o">=</span> <span class="p">[</span><span class="n">username</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">]</span>
  <span class="o">//</span> <span class="n">creates</span> <span class="n">new</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">variable</span>
  <span class="n">var</span> <span class="n">row</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
  <span class="o">//</span> <span class="n">goes</span> <span class="n">through</span> <span class="n">entire</span> <span class="n">data</span> <span class="nb">set</span> <span class="ow">and</span> <span class="n">places</span> <span class="n">data</span> <span class="n">into</span> <span class="n">cells</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">tableCells</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">tableCell</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;th&#39;</span><span class="p">)</span>
    <span class="n">tableCell</span><span class="o">.</span><span class="n">textContent</span> <span class="o">=</span> <span class="n">tableCells</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">tableCell</span><span class="o">.</span><span class="n">className</span> <span class="o">=</span> <span class="s1">&#39;cell&#39;</span>
    <span class="n">row</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tableCell</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="o">//</span> <span class="n">creates</span> <span class="n">new</span> <span class="n">row</span> <span class="k">as</span> <span class="n">child</span> <span class="n">of</span> <span class="n">schedule</span> <span class="n">element</span>
  <span class="n">schedule</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="POST-Method">POST Method<a class="anchor-link" href="#POST-Method"> </a></h4><ul>
<li>This method is used to push data to the backend using the HTTP POST method.<ul>
<li>The function <code>addData</code> is defined with the parameters that are going to be pushed into the backend.</li>
<li>An object is created to define the variables that are going to be pushed into the backend. This is basically the JSON string that will be sent to the backend to get decoded and inserted into the database.</li>
<li>The <code>fetch()</code> function is called with the <code>api</code> variable, which is a variable representing the url for the backend API, and the extension specific to where the data will be posted, in this case being <code>/leaderboard</code>.<ul>
<li>The method, headers, and body of the data are defined in order to complete a successful HTTP request to the backend. The object <code>data</code> which was created earlier, is converted to a JSON string here and sent to the backend.</li>
</ul>
</li>
<li>If an error is detected, it is returned and the request will fail.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">calls</span> <span class="n">addData</span> <span class="n">function</span>
<span class="n">function</span> <span class="n">addData</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">){</span>

<span class="o">//</span> <span class="n">creates</span> <span class="nb">object</span> <span class="n">defining</span> <span class="n">the</span> <span class="n">variables</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">added</span> <span class="n">to</span> <span class="n">the</span> <span class="n">backend</span><span class="p">,</span> <span class="n">corresponding</span> <span class="k">with</span> <span class="n">the</span> <span class="n">backend</span> <span class="n">variables</span>
<span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
  <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
  <span class="s2">&quot;pointsEasy&quot;</span><span class="p">:</span> <span class="n">pointsEasy</span><span class="p">,</span>
  <span class="s2">&quot;pointsMedium&quot;</span><span class="p">:</span> <span class="n">pointsMedium</span><span class="p">,</span>
  <span class="s2">&quot;pointsHard&quot;</span><span class="p">:</span> <span class="n">pointsHard</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">POST</span> <span class="n">method</span> <span class="n">called</span>
<span class="n">fetch</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/leaderboard&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="n">method</span><span class="p">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="n">body</span><span class="p">:</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
<span class="p">})</span>
  <span class="o">//</span> <span class="n">error</span> <span class="n">checking</span>
  <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
  <span class="o">.</span><span class="n">catch</span><span class="p">((</span><span class="n">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="PUT-and-DELETE-Methods">PUT and DELETE Methods<a class="anchor-link" href="#PUT-and-DELETE-Methods"> </a></h4><ul>
<li>These two methods are almost identical to the POST method above in the way they work, the only difference being that the method requested is different. The name of the function defined is also changes, in this case being <code>editData()</code> and <code>deleteData()</code>.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">editing</span> <span class="n">function</span> <span class="n">defined</span>
<span class="n">function</span> <span class="n">editData</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">){</span>

  <span class="o">//</span> <span class="n">has</span> <span class="nb">object</span> <span class="k">with</span> <span class="n">variables</span> <span class="n">that</span> <span class="n">are</span> <span class="n">required</span> <span class="ow">in</span> <span class="n">backend</span>
  <span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
    <span class="s2">&quot;pointsEasy&quot;</span><span class="p">:</span> <span class="n">pointsEasy</span><span class="p">,</span>
    <span class="s2">&quot;pointsMedium&quot;</span><span class="p">:</span> <span class="n">pointsMedium</span><span class="p">,</span>
    <span class="s2">&quot;pointsHard&quot;</span><span class="p">:</span> <span class="n">pointsHard</span>
  <span class="p">}</span>
  
  <span class="o">//</span> <span class="n">PUT</span> <span class="n">method</span> <span class="n">called</span>
  <span class="n">fetch</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/leaderboard&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">method</span><span class="p">:</span> <span class="s1">&#39;PUT&#39;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">body</span><span class="p">:</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
  <span class="p">})</span>
    <span class="o">//</span> <span class="n">error</span> <span class="n">checking</span>
    <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
    <span class="o">.</span><span class="n">catch</span><span class="p">((</span><span class="n">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="n">console</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">deleting</span> <span class="n">function</span> <span class="n">defined</span>
<span class="n">function</span> <span class="n">deleteData</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">pointsEasy</span><span class="p">,</span> <span class="n">pointsMedium</span><span class="p">,</span> <span class="n">pointsHard</span><span class="p">){</span>

  <span class="o">//</span> <span class="nb">object</span> <span class="n">defined</span> <span class="k">with</span> <span class="n">variables</span> <span class="n">that</span> <span class="n">are</span> <span class="n">same</span> <span class="k">as</span> <span class="n">backend</span>
  <span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
    <span class="s2">&quot;pointsEasy&quot;</span><span class="p">:</span> <span class="n">pointsEasy</span><span class="p">,</span>
    <span class="s2">&quot;pointsMedium&quot;</span><span class="p">:</span> <span class="n">pointsMedium</span><span class="p">,</span>
    <span class="s2">&quot;pointsHard&quot;</span><span class="p">:</span> <span class="n">pointsHard</span>
  <span class="p">}</span>
  
  <span class="o">//</span> <span class="n">DELETE</span> <span class="n">method</span> <span class="n">called</span>
  <span class="n">fetch</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/leaderboard&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">method</span><span class="p">:</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">body</span><span class="p">:</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
  <span class="p">})</span>
    <span class="o">//</span> <span class="n">error</span> <span class="n">checking</span>
    <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
    <span class="o">.</span><span class="n">catch</span><span class="p">((</span><span class="n">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="n">console</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Calling-Images-(GET-Method)">Calling Images (GET Method)<a class="anchor-link" href="#Calling-Images-(GET-Method)"> </a></h3><ul>
<li>The process for calling images is basically the same as anything else, except you need to be able to reconstruct the images based on the base64 that is requested from the backend.</li>
<li>In this case, the image in the api is being called to the frontend and is returned as the variable <code>list</code>.<ul>
<li>This is then inserted directly into the html by getting the element that needs to be edited and styling with css by using the built-in function <code>data:image/png;base64,</code> which translated from bytes to pixel.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">//</span> <span class="n">GET</span> <span class="n">method</span> <span class="n">calling</span> <span class="n">info</span> <span class="kn">from</span> <span class="nn">backend</span> <span class="n">url</span>
<span class="n">const</span> <span class="n">getList</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="n">const</span> <span class="nb">list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="s2">&quot;/api/images/GetEasyImage&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">());</span>
  <span class="k">return</span> <span class="nb">list</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">inserting</span> <span class="n">image</span> <span class="n">into</span> <span class="n">frontend</span>
<span class="n">getList</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="nb">list</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="n">document</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;background-image: url(&#39;data:image/png;base64, &quot;</span> <span class="o">+</span> <span class="nb">list</span><span class="o">.</span><span class="n">bytes</span> <span class="o">+</span><span class="s2">&quot;&#39;);&quot;</span>
<span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Popcorn-Hacks">Popcorn Hacks<a class="anchor-link" href="#Popcorn-Hacks"> </a></h4><p>Please answer these questions to earn points for the popcorn hacks.</p>
<ol>
<li>How is data for images stored in a Flask API and how is it displayed on the frontend when requested?</li>
</ol>
<p>It can be stored as binary, and displayed on frontend when requested through an HTTP request.</p>
<ol>
<li>What is the <code>fetch()</code> function and how is it used in frontend logic?</li>
</ol>
<p>It is a javascript function that fetched data front the backend server, through a url defined in the backend.</p>
<ol>
<li>How is data formatted and sent to the backend? (mention JSON in your answer)</li>
</ol>
<p>Data sent to the backend in JSON format. In JavaScript, JSON data can be created using a plain JavaScript object, and then sent to the server using fetch() to indicate the content type of the request.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Time-and-Space-Complexity-of-Algorithms">Time and Space Complexity of Algorithms<a class="anchor-link" href="#Time-and-Space-Complexity-of-Algorithms"> </a></h2><p>The lesson for time and space complexity of algorithms will consist of demonstrations of sorting algorithms and the different time complexities that they come with on a small scale. This can be acomplished using things such as a deck of cards or even with actual people. An example of how this will work is laying out the cards in a random order on the table, and demonstrating different ways of sorting it. From methods such as bubble sort to methods such as bogo sort, it will be really easy to see exactly how much time it would take for these different sorting algoritms to complete. Then after that, it is easy to understand the concept of time complexity when given a real world example.</p>
<p>Space complexity can be demonstrated by using the same method, however, adding in the extra step of having the cards in a pile. This will show how much space is needed to complete the sorting algorithm. This will easily reveal the concept of space complexity because it allows people to witness a real world, physical example of the concept, turning a really hard to grasp concept into something that is easy to understand.</p>
<p>Additionally, we are also going to analyze certain algorithms within our project to show how such analysis is applicable to real world projects.</p>
<p><strong>Essential Question: What is the quicksort algorithm, and how does it work? How does it's time and space complexities scale with input sizes?</strong></p>
<h3 id="QuickSort-Algorithm">QuickSort Algorithm<a class="anchor-link" href="#QuickSort-Algorithm"> </a></h3><p>The main algorithm we've employed is an recursive implementation of quickSort in the backend to sort the database entries to obtain the user with the highest overall score. Typically this algorithm is implemented to sort in ascending order, but to make it easier to extract the top 10 users, we sill be modifying the algorithm to sort in descending order (so the top players show up first in the list).</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LeaderboardTop10</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>                                              <span class="c1"># Pivot value set to the 2nd index of the last element</span>
        <span class="n">pivot_pos</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="mi">1</span>                                              <span class="c1"># Set our base pivot position, ensure that lower picoit index == lo</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>                                       <span class="c1"># Iterate over all elements in the partition array</span>
            <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pivot</span><span class="p">:</span>                                    <span class="c1"># Found an element creater than pivot</span>
                <span class="n">pivot_pos</span><span class="o">+=</span><span class="mi">1</span>                                            <span class="c1"># Increment correct position for pivot</span>
                <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span><span class="p">]</span>     <span class="c1"># Swap the larger element with the element at the current pivot position</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>       <span class="c1"># Swap element at pivot position with the pivot element</span>
        <span class="k">return</span> <span class="n">pivot_pos</span><span class="o">+</span><span class="mi">1</span>                                              <span class="c1"># Return index of pivot element</span>

    <span class="k">def</span> <span class="nf">qSortUserList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">:</span>
            <span class="n">last_pivot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qSortUserList</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">last_pivot</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qSortUserList</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">last_pivot</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">users_list</span> <span class="o">=</span> <span class="n">get_user_list</span><span class="p">()</span>
        <span class="n">top10</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qSortUserList</span><span class="p">(</span><span class="n">users_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">users_list</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_list</span><span class="p">:</span>
            <span class="n">top10</span><span class="p">[</span><span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">top10</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">top10</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top10</span>
        <span class="k">return</span> <span class="n">top10</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
<p>To understand how the algorithm first, we must first familiarize ourselves with the process.</p>
<ol>
<li>Our backend grabs all users from our leaderboard </li>
<li>Returns all users and their scores in a 2-D array, each element is a list of length two that contains the username and cumulative score of the player</li>
<li>The sorting algorithm will use the second element representing the user score to sort the array of users.  
<pre><code>┌─────────────────────┐               ┌──────────────────┐              ┌─────────────────┐  
│                     │               │                  │              │                 │  
│                     │               │      Split       │              │    display      │  
│      Database       │               │       the        ├──────────────►    sorted list  │  
│                     │               │    List into     │              │    on endpoint  │  
│                     │               │   top 10 users   │              │                 │  
└──────────┬──────────┘               └─────────▲────────┘              └─────────────────┘  
        │                                    │  
        │                                    │  
        │                                    │  
        │                                    │  
┌──────────▼──────────┐               ┌─────────┴────────┐  
│                     │               │                  │  
│   2-D User  Array   │               │    QuickSort     │  
│                     ├───────────────►                  │  
│ [(username, score)] │               │    Algorithm     │  
│                     │               │                  │  
└─────────────────────┘               └──────────────────┘</code></pre>
Our quickSort algorithm consists of 2 procedures, a <code>partition()</code> procedure that <strong>pivots</strong> and sorts individual elements, and a <code>qSortUserList()</code> that performs recursion which finishes the sorting.</li>
</ol>
<h3 id="The-Logic">The Logic<a class="anchor-link" href="#The-Logic"> </a></h3><p>The partition procedure will serve to "partition" our list into 2 parts, a smaller portion and a larger portion around a certain pivot value (Note: These portions don't have to sorted yet!).</p>
<h4 id="Partition-procedure">Partition procedure<a class="anchor-link" href="#Partition-procedure"> </a></h4><p>First, partition selects a certain element in a list to be a pivot. This pivot value will be used to make comparisons to every other value in the array. For simplicity, we have selected our pivot element as the last element in the unsorted list. The procedure defines a <code>pivot_pos</code> variable to denote the correct position of the pivot index after each iteration. Although it may seem weird that the variable intially starts with a value of 0-1 = -1, this negative index is resolved by the return statement, which always returns an index that's one higher than pivot_pos. This serves to ensure that the lowest pivot index would be 0, which is the smallest element in any given partition.</p>
<div class="highlight"><pre><span></span><span class="n">pivot</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">pivot_pos</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
<p>The partition will then iterate over each element in the list from the starting and ending indexes indicated by the parameters. if a particular value is found to be larger than the pivot, the algorithm well then increment the recorded pivot position and swap the pivot with the found element.</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pivot</span><span class="p">:</span>
        <span class="n">pivot_pos</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span><span class="p">]</span>
</pre></div>
<p>Finally, the partition procedure swaps the element at the <code>pivot_pos+1</code> index with our pivot element at the <code>hi</code> index to place the pivot at it's rightful place. We know that <code>pivot_pos+1</code> must be smaller than <code>hi</code> because it did not trigger the conditional to increment the `pivot_pos+1`` index. At last, the pivot_pos is incremented and returned to serve as an indicator of where our two partitions split.</p>
<div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">hi</span><span class="p">],</span> <span class="n">arr</span><span class="p">[</span><span class="n">pivot_pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">return</span> <span class="n">pivot_pos</span><span class="o">+</span><span class="mi">1</span>
</pre></div>
<h4 id="qSort-procedure">qSort procedure<a class="anchor-link" href="#qSort-procedure"> </a></h4><p>If the parition procedure splits our list into smaller and larger regions, then our qSort procedure ensures that these regions are in order. It's hard to explain, but the procedure iterates over each paritition, repeating the paritition process, setting new pivot values, and correctly places the pivot values at their correct sorted order.</p>
<p>The procedure first checks if the lower index is smaller than the higher index, to ensure that our parition has a length greater than 1. If this check passes, the procedure then calls the <code>partition</code> procedure to both split our list into the two distinct regions and also the index of our correctly placed pivot value. The procedure then invokes itself again on the larger interval (replacing hi to be the partition index-1 since the previous pivot is already sorted), and also on the smaller interval (replacing lo to be partition index+1).</p>
<p>Eventually, the qSort procedure will iterate through all elements in the list while parition places each element at the correct position, giving us the final sorted list.</p>
<h4 id="Complexity-analysis">Complexity analysis<a class="anchor-link" href="#Complexity-analysis"> </a></h4><p>To analyze time complexity, we must analyze the partition and qSort procedures.</p>
<p>For the qSort procedure, because we divide the array into 2 halves during each function call, our number of function calls scales proportionally to log(n), where n is the length of the input array. However, within each function call, we also call the partition procedure, which contains an for-loop that iterates over each element in the partioned array, comparing it to a pivot value. We are well familiar with since loops, and can safely say that runtime scales proportionally to the length of the partition array. Due to this, we can conclude that our iteration time complexity scales linearly. Thus for each iterative process, our timerun scales proportionally to n.</p>
<p>Finally, we could multiply our two complexities together to get a representation of our overall complexity. Thus, the asymptotic notation for a time complexity could be represented as O(logn), where n is the length of the input array. Keep in mind, Big-Oh notation is not a function that returns the accurate runtime for any given input, but rather only gives us a model to see how runtime scales with increasing input sizes.</p>
<p>Space complexity for this program is much easier to analyze. Because the array is sorted in-place (meaning we don't create other placeholders or copies), we require no additional space to sort this array. However, recursive function calls may require extra storage on the call stack. Since we found the number of recursive calls to be asymptotic to O(logn), we can conclude that quickSort has an <strong>O(1)</strong> space complexity for an iterative method, and an <strong>O(logn)</strong> space complexity for a recursive method.</p>
<h3 id="Popcorn-Hack">Popcorn Hack<a class="anchor-link" href="#Popcorn-Hack"> </a></h3><p>Please answer our EQ for this section: <strong>What is the quicksort algorithm, and how does it work? How does it's time and space complexities scale with input sizes?</strong></p>
<p>Quicksort is a sorting algorithm and works by selecting a "pivot" element from the array and positioning the other elements into two sub-arrays based on whether they are less than or greater than the pivot. The sub-arrays are then sorted using the same flip around process.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Hacks---Frontend-and-Backend---ON-GROUP-REVIEW-TICKET">Hacks - Frontend and Backend - ON GROUP REVIEW TICKET<a class="anchor-link" href="#Hacks---Frontend-and-Backend---ON-GROUP-REVIEW-TICKET"> </a></h2><p>Please clone these two repositories:</p>
<ul>
<li><a href="https://github.com/DavidVasilev1/hacks-FE">Frontend</a></li>
<li><a href="https://github.com/DavidVasilev1/hacks-BE">Backend</a></li>
</ul>
<p>Directions:</p>
<p>You will be creating a full stack of a text and image database which you will code in the Flask Backend and pull information to sort in the Frontend.</p>
<p>You need to have coded a fully working CRUD in the Flask, which you can show working with Postman, however you only need to show the Frontend reading and displaying data from the backend.</p>
<p>You may use the code we showed to you today in class in order to code the both the Frontend and Backend.</p>
<p>Follow the directions in the comments in the Flask Backend and the ReadMe in the frontend before starting.</p>
<h2 id="Hacks---QuickSort">Hacks - QuickSort<a class="anchor-link" href="#Hacks---QuickSort"> </a></h2><p>On this notebook, try recreating the original quicksort algorithm from our modified version. For an additional challenge, try abstracting the partitioning process through list comprehension!</p>
<p>After creating a successful algorithm, either create a diagram showing how the algorithm works, or a diagram that illustrates the time and/or space complexity of a recursive approach.</p>
<h2 id="Hacks-Helpers">Hacks Helpers<a class="anchor-link" href="#Hacks-Helpers"> </a></h2><p>If you need help with your hacks, you can check out our project repos to see how we did it.</p>
<ul>
<li><a href="https://github.com/DavidVasilev1/Nighthawk-guessr/blob/gh-pages/leaderboard.html">Frontend Table</a></li>
<li><a href="https://github.com/DavidVasilev1/Nighthawk-guessr/blob/gh-pages/game.html">Frontend Image</a></li>
<li><a href="https://github.com/DavidVasilev1/flask3/tree/master/nighthawkguessr_api">Backend</a></li>
</ul>
<p>You can also message us on the coding Slack channel for additional help.</p>
<h2 id="Points">Points<a class="anchor-link" href="#Points"> </a></h2><ul>
<li>Popcorn Hacks - 0.1 pts</li>
<li>Full Stack - 0.4+<ul>
<li>0.5 extra for styling html page</li>
</ul>
</li>
<li>QuickSort Hacks - 0.3+<ul>
<li>0.5 extra for implementing quicksort</li>
</ul>
</li>
</ul>
<h1 id="HACKS-ARE-DUE-SATURDAY-(4/29)-11:59-PM">HACKS ARE DUE SATURDAY (4/29) 11:59 PM<a class="anchor-link" href="#HACKS-ARE-DUE-SATURDAY-(4/29)-11:59-PM"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
    <span class="n">pivot</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">high</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">low</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="c1"># list comprehension to partition the array</span>
    <span class="n">left</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span> <span class="k">if</span> <span class="n">array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pivot</span><span class="p">]</span>
    <span class="n">right</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span> <span class="k">if</span> <span class="n">array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">]</span>
    <span class="c1"># copy elements from left and right partitions to original array</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)):</span>
        <span class="n">array</span><span class="p">[</span><span class="n">low</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">left</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="n">array</span><span class="p">[</span><span class="n">low</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)]</span> <span class="o">=</span> <span class="n">pivot</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">)):</span>
        <span class="n">array</span><span class="p">[</span><span class="n">low</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="c1"># return the position of the pivot</span>
    <span class="k">return</span> <span class="n">low</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">low</span> <span class="o">&lt;</span> <span class="n">high</span><span class="p">:</span>
        <span class="n">pi</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>
        <span class="n">quickSort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">pi</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">quickSort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">pi</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unsorted Array&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="n">quickSort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sorted Array in Ascending Order:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Unsorted Array
[1, 7, 4, 1, 10, 9, -2]
Sorted Array in Ascending Order:
[-2, 1, 1, 4, 7, 9, 10]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

